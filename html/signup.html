<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="signup.css" />
  <title>AMA Health Hub: signup</title>
</head>
<body>

  <h2>Sign up</h2>

  <form id="signupForm">
    <label for="exampleInputName">Name:</label>
    <input type="text" id="exampleInputName" name="name" required><br><br>

    <label for="exampleInputPassword">Password:</label>
    <input type="password" id="exampleInputPassword" name="password" required><br><br>

    <label for="exampleInputEmail">Email:</label>
    <input type="email" id="exampleInputEmail" name="email" required><br><br>

    <label for="exampleInputContactNumber">Contact Number:</label>
    <input type="tel" id="exampleInputContactNumber" name="contactNumber" required><br><br>

    <button type="submit"><a href="../html/login.html" id="profile">Sign Up</a></button>
  </form>

  <script>
    document.getElementById('signupForm').addEventListener('submit', async (event) => {
      event.preventDefault(); // Prevent default form submission

      const formData = {
        name: document.getElementById('exampleInputName').value,
        password: document.getElementById('exampleInputPassword').value,
        email: document.getElementById('exampleInputEmail').value,
        contactNumber: document.getElementById('exampleInputContactNumber').value
      };

      
      try {
        const response = await fetch('/users', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(formData)
        });

        if (!response.ok) {
          throw new Error('Failed to create user account');
        }

        const newUser = await response.json();
        console.log('New user created:', newUser);
        alert('User created successfully!'); // Example of success message to user
        document.getElementById('signupForm').reset(); // Reset the form after successful submission
      } catch (error) {
        console.error('Error creating user:', error);
        alert('Failed to create user account. Please try again.'); // Example of error handling for user
        // Handle error: show error message to user
      }
    });
  </script>

</body>
</html>
